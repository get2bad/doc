## Javaæ¡†æ¶ä½“ç³»

![](http://image.tinx.top/20211115133739.png)

â€‹	

## Listé›†åˆ

![](http://image.tinx.top/20211115133855.png)

### ArrayList

#### åŸºç¡€ç‰¹æ€§

+ <font color=red>ArrayList å¯ä»¥æ·»åŠ å¤šä¸ªnull </font>
+ åº•å±‚æ˜¯ä»¥æ•°ç»„æ¥å®ç°æ•°æ®å­˜å‚¨çš„
+ ArrayListåŸºæœ¬ç­‰åŒäºVectorï¼Œå·®åˆ«å°±æ˜¯ArrayList çº¿ç¨‹ä¸å®‰å…¨ï¼ŒVectorçº¿ç¨‹å®‰å…¨

#### æ‰©å®¹æœºåˆ¶

![](http://image.tinx.top/20211115140209.png)

![image-20211115140443236](/Users/wills/Library/Application Support/typora-user-images/image-20211115140443236.png)

+ ArrayListä¸­ç»´æŠ¤äº†ä¸€ä¸ªObjectç±»å‹çš„æ•°ç»„
+ å½“åˆ›å»ºArrayListå¯¹è±¡æ—¶ï¼Œä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹elementDataå®¹é‡ä¸º0ï¼Œç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œå®ƒçš„åˆå§‹å®¹é‡ä¸º10ï¼Œå¦‚æœå†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å¤§åˆ°ä¹‹å‰çš„1.5å€
+ å¦‚æœä½¿ç”¨äº†æœ‰å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹çš„elemenetDataçš„å®¹é‡ä¸ºå‚æ•°çš„å®¹é‡ï¼Œå¦‚æœè¦å†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å¤§åˆ°ä¹‹å‰çš„1.5å€

#### æ­¥éª¤

å¦‚æœæ˜¯æ— å‚æ„é€ æ–¹æ³•ï¼š

1. åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„elementDataæ•°ç»„

2. å½“è¦æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œaddæºç æ˜¯ï¼š

   ![](http://image.tinx.top/20210629161225.png)

   1. å…ˆç¡®ä¿æ•°ç»„ä¸­å‰©ä½™çš„å®¹é‡å¯ä»¥æ‰©å®¹

      ![](http://image.tinx.top/20210629161652.png)

      å…ˆæ£€æŸ¥æ˜¯ä¸æ˜¯é»˜è®¤0é•¿åº¦çš„æ•°ç»„çš„ï¼Œå¦‚æœæ˜¯å°±æ˜¯æ‰¾å‡ºé»˜è®¤å®¹é‡å’Œæœ€å°å®¹é‡çš„æœ€å¤§å€¼(å› ä¸ºåé¢ä¼šæ‰©å¤§minCapacity)

      ![](http://image.tinx.top/20210629162227.png)

      å…¶ä¸­modCount++ æ˜¯è®°å½•æ˜¯å¦æ˜¯ å¤šçº¿ç¨‹æ›´æ”¹è¿™ä¸ªå®¹é‡ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹æ›´æ”¹å®¹é‡ï¼Œä¼šæŠ›å‡ºé”™è¯¯

      åé¢æ˜¯åˆ¤æ–­æ˜¯å¦å®¹é‡è¶³å¤Ÿï¼Œä¸è¶³å¤Ÿè°ƒç”¨growæ–¹æ³•

      ![](http://image.tinx.top/20210629162924.png)

      æ­¥éª¤æ˜¯ï¼š

      	1. å…ˆè·å–å½“å‰æ•°ç»„çš„é•¿åº¦
      	2. åˆ›å»ºä¸€ä¸ªnewCapacity å°†ä¹‹å‰çš„é•¿åº¦æ‰©å¤§è‡³1.5å€(ä½è¿ç®—ï¼Œä¸äº†è§£å¯ä»¥å»è¡¥ä¹ ä¸€ä¸‹ä½è¿ç®—ç›¸å…³çŸ¥è¯†)
      	3. åˆ¤æ–­å½“å‰newCapacityæ˜¯å¦æ¯”æœ€å°å®¹é‡å°ï¼Œå¦‚æœæ˜¯ï¼Œå°±å°†æœ€å°å®¹é‡èµ‹å€¼ç»™newCapacity
      	4. åˆ¤æ–­å½“å‰newCapacityæ˜¯å¦æ¯”æœ€å¤§å®¹é‡å¤§ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨hugeCapacity
      	5. å¤åˆ¶ä¹‹å‰çš„æ•°ç»„ç»™æ–°çš„æ•°ç»„
      
   2. ç„¶åå°†è¦æ·»åŠ çš„å€¼æ”¾åˆ°æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸­
   
   3. è¿”å›true

### CopyOnWriteArrayList

> è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œå¦‚æœä½ æ˜¯åœ¨å¤šçº¿ç¨‹æ¡ä»¶ä¸‹ä½¿ç”¨é›†åˆç±»ï¼Œæ¨èä½¿ç”¨CopyOnWriteArrayList
>
> ä»–çš„å®ç°åŸç†è·ŸArrayListå·®ä¸å¤šï¼Œåº•å±‚éƒ½æ˜¯ä¸€ä¸ªObjectæ•°ç»„ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ä»–æ¯”ArrayListå¤šäº†ä¸€æŠŠReentrantLocké”ï¼Œåœ¨æ·»åŠ æ—¶ä¼šé”ä½

![](http://image.tinx.top/20211116145610.png)

#### æ·»åŠ æ—¶çš„ä»£ç è®²è§£

```java
// æºç ï¼š
public boolean add(E e) {
  // åœ¨æ·»åŠ æ—¶ä¼šè°ƒç”¨ç±»ä¸­å£°æ˜çš„è¿™æŠŠé”è¿›è¡Œé”ä½ï¼Œåœ¨æ·»åŠ å®Œæˆæ—¶finallyä»£ç ä¸­è¿›è¡Œunlockæ“ä½œ
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}
```



### Vector

> ä»£ç å‡ ä¹å’ŒArrayListç›¸åŒï¼Œå°±æ˜¯ç›¸å…³çš„åƒINIT_CAPACITYç­‰éƒ½æ˜¯ç›´æ¥å†™æ­»çš„ï¼Œç•¥å¾®çš„ä¸åŒè€Œå·²

#### åº•å±‚åŸç†

+ åº•å±‚å’ŒArrayListä¸€æ ·æ˜¯ä¸€ä¸ª ```protect Object[] elementData```

+ Vector åº•å±‚æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œé‡Œé¢çš„æ–¹æ³•éƒ½å¸¦æœ‰synchornized

  ![](http://image.tinx.top/20210702093911.png)

+ åœ¨å¼€å‘ä¸­ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„å•åˆ—é›†åˆæ—¶ï¼Œè€ƒè™‘ä½¿ç”¨Vector(ä½†æ˜¯æ€§èƒ½å¤ªå·®ï¼Œå¯ä»¥è€ƒè™‘CopyOnWriteArrayList é‡Œé¢å®ç°äº†Locké”ï¼Œæ€§èƒ½æ›´é«˜ï¼Œæ›´ä¼˜é€‰æ‹©)

+ å¦‚æœåˆ›å»ºæ—¶ä½¿ç”¨äº†æ— å‚ï¼Œåœ¨æ‰©å®¹æ—¶ä¼šè‡ªåŠ¨æ‰©å®¹è‡³ä¹‹å‰çš„ä¸¤å€ï¼Œå¦‚æœæ˜¯æœ‰å‚çš„è¯ï¼Œä¼šåœ¨å‚æ•°ä¸Š * 2 ä½œä¸ºæ‰©å®¹

  ![](http://image.tinx.top/20210702093801.png)

### LinkedList

#### ç‰¹æ€§

+ åº•å±‚å®ç°äº†åŒå‘é“¾è¡¨ ã€ åŒç«¯é˜Ÿåˆ—çš„ç‰¹ç‚¹

  ![](http://image.tinx.top/20211115150303.png)

+ åº•å±‚ç»´æŠ¤äº†ä¸¤ä¸ªå±æ€§  ```first``` å’Œ ```last``` åˆ†åˆ«æŒ‡å‘ é¦–èŠ‚ç‚¹ å’Œ å°¾èŠ‚ç‚¹,é‡Œé¢åˆç»´æŠ¤äº† ```prev```ã€```next```ã€```item```ä¸‰ä¸ªå±æ€§ï¼Œç”¨æ¥æŒ‡å‘ ä¹‹å‰ä¸€ä¸ªå…ƒç´  ä¹‹åä¸€ä¸ªå…ƒç´  å½“å‰å…ƒç´ ï¼Œæœ€ç»ˆå®ç°åŒå‘é“¾è¡¨

  ![](http://image.tinx.top/20211115150527.png)

+ å¯ä»¥æ·»åŠ ä»»æ„å…ƒç´ (å…ƒç´ å¯ä»¥é‡å¤)ï¼ŒåŒ…æ‹¬null

+ çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰å®ç°çº¿ç¨‹åŒæ­¥ synchornized

### ArrayList å’Œ LinkedList æ¯”è¾ƒ

|            | åº•å±‚ç»“æ„                     | å¢åˆ æ•ˆç‡           | æ”¹æŸ¥æ•ˆç‡ |
| :--------: | ---------------------------- | ------------------ | -------- |
| ArrayList  | å¯å˜æ•°ç»„                     | è¾ƒä½ï¼Œæ•°ç»„å¤åˆ¶æ‰©å®¹ | è¾ƒé«˜     |
| LinkedList | åŒå‘é“¾è¡¨(æ­£å‘nextï¼Œé€†å‘prev) | è¾ƒé«˜ï¼Œé€šè¿‡é“¾è¡¨è¿½åŠ  | è¾ƒä½     |

#### å¦‚ä½•é€‰æ‹©ArrayList å’Œ LinkedList?

1. å¦‚æœæˆ‘ä»¬æ”¹æŸ¥çš„æ“ä½œè¾ƒå¤šï¼Œé€‰æ‹©ArrayList
2. å¦‚æœæˆ‘ä»¬å¢åˆ çš„æ“ä½œæ¯”è¾ƒå¤šï¼Œé€‰æ‹©LinkedList
3. ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç¨‹åºä¸­ï¼Œ80%-90%éƒ½æ˜¯æŸ¥è¯¢ï¼Œå› æ­¤å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šé€‰æ‹©ArrayList

### è¡¥å……å†…å®¹:RandomAccessæ¥å£

```
public interface RandomAccess {
}
```

æŸ¥çœ‹æºç æˆ‘ä»¬å‘ç°å®é™…ä¸Š `RandomAccess` æ¥å£ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰å®šä¹‰ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘çœ‹æ¥ `RandomAccess` æ¥å£ä¸è¿‡æ˜¯ä¸€ä¸ªæ ‡è¯†ç½¢äº†ã€‚æ ‡è¯†ä»€ä¹ˆï¼Ÿ æ ‡è¯†å®ç°è¿™ä¸ªæ¥å£çš„ç±»å…·æœ‰éšæœºè®¿é—®åŠŸèƒ½ã€‚

åœ¨ `binarySearchï¼ˆ`ï¼‰æ–¹æ³•ä¸­ï¼Œå®ƒè¦åˆ¤æ–­ä¼ å…¥çš„list æ˜¯å¦ `RamdomAccess` çš„å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨`indexedBinarySearchï¼ˆï¼‰`æ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè°ƒç”¨`iteratorBinarySearchï¼ˆï¼‰`æ–¹æ³•

```
    public static <T>
    int binarySearch(List<? extends Comparable<? super T>> list, T key) {
        if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)
            return Collections.indexedBinarySearch(list, key);
        else
            return Collections.iteratorBinarySearch(list, key);
    }
```

`ArrayList` å®ç°äº† `RandomAccess` æ¥å£ï¼Œ è€Œ `LinkedList` æ²¡æœ‰å®ç°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘è§‰å¾—è¿˜æ˜¯å’Œåº•å±‚æ•°æ®ç»“æ„æœ‰å…³ï¼`ArrayList` åº•å±‚æ˜¯æ•°ç»„ï¼Œè€Œ `LinkedList` åº•å±‚æ˜¯é“¾è¡¨ã€‚æ•°ç»„å¤©ç„¶æ”¯æŒéšæœºè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆ1ï¼‰ï¼Œæ‰€ä»¥ç§°ä¸ºå¿«é€Ÿéšæœºè®¿é—®ã€‚é“¾è¡¨éœ€è¦éå†åˆ°ç‰¹å®šä½ç½®æ‰èƒ½è®¿é—®ç‰¹å®šä½ç½®çš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆnï¼‰ï¼Œæ‰€ä»¥ä¸æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚ï¼Œ`ArrayList` å®ç°äº† `RandomAccess` æ¥å£ï¼Œå°±è¡¨æ˜äº†ä»–å…·æœ‰å¿«é€Ÿéšæœºè®¿é—®åŠŸèƒ½ã€‚ `RandomAccess` æ¥å£åªæ˜¯æ ‡è¯†ï¼Œå¹¶ä¸æ˜¯è¯´ `ArrayList` å®ç° `RandomAccess` æ¥å£æ‰å…·æœ‰å¿«é€Ÿéšæœºè®¿é—®åŠŸèƒ½çš„ï¼

ä¸‹é¢å†æ€»ç»“ä¸€ä¸‹ list çš„éå†æ–¹å¼é€‰æ‹©ï¼š

- å®ç°äº† `RandomAccess` æ¥å£çš„listï¼Œä¼˜å…ˆé€‰æ‹©æ™®é€š for å¾ªç¯ ï¼Œå…¶æ¬¡ foreach,
- æœªå®ç° `RandomAccess`æ¥å£çš„listï¼Œä¼˜å…ˆé€‰æ‹©iteratoréå†ï¼ˆforeachéå†åº•å±‚ä¹Ÿæ˜¯é€šè¿‡iteratorå®ç°çš„,ï¼‰ï¼Œå¤§sizeçš„æ•°æ®ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨æ™®é€šforå¾ªç¯

## Seté›†åˆ

+ Setæ¥å£çš„å¸¸ç”¨æ–¹æ³•

  å’ŒListæ¥å£ä¸€æ ·ï¼ŒSetæ¥å£ä¹Ÿæ˜¯Collectionçš„å­æ¥å£ï¼Œå› æ­¤å¸¸ç”¨æ–¹æ³•å’ŒCollectionæ¥å£ä¸€æ ·

+ Setæ¥å£çš„éå†æ–¹å¼

  åŒCollectionçš„éå†æ–¹å¼ä¸€æ ·ï¼Œå› ä¸ºSetæ¥å£æ˜¯Collectionæ¥å£çš„å­æ¥å£

  1. å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨
  2. å¢å¼ºfor
  3. <font color=red>ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼æ¥è·å–</font>

+ å­˜å‚¨

  1. å¯ä»¥å­˜å‚¨null
  2. ä¸èƒ½å­˜æ”¾é‡å¤å…ƒç´ 
  3. å­˜å‚¨çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå–å‡ºçš„é¡ºåºçš„é¡ºåºè™½ç„¶ä¸æ˜¯æ·»åŠ çš„é¡ºåºï¼Œä½†æ˜¯ä¹Ÿæ˜¯å›ºå®šçš„

### HashSet

> ä»€ä¹ˆæ˜¯hash?
>
> hashä¹Ÿç§°ä¸ºæ•£åˆ—ã€å“ˆå¸Œï¼ŒåŸºæœ¬åŸç†å°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥ï¼Œé€šè¿‡Hashç®—æ³•å˜æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºã€‚è¿™ä¸ªæ˜ å°„è§„åˆ™å°±æ˜¯å¯¹åº”çš„hashç®—æ³•ï¼Œè€ŒåŸå§‹æ•°æ®æ˜ å°„åçš„äºŒè¿›åˆ¶ä¸²å°±æ˜¯å“ˆå¸Œå€¼
>
> 1. hashä¸èƒ½åå‘æ¨å¯¼å‡ºåŸå§‹çš„æ•°æ®
> 2. è¾“å…¥æ•°æ®å¾®å°çš„å˜åŒ–ä¼šå¾—åˆ°å®Œå…¨ä¸åŒçš„hashå€¼ï¼Œç›¸åŒçš„ä¼šå¾—åˆ°ç›¸åŒçš„å€¼
> 3. å“ˆå¸Œç®—æ³•çš„æ‰§è¡Œæ•ˆç‡è¦æ›´åŠ é«˜æ•ˆï¼Œé•¿çš„æ–‡æœ¬ä¹Ÿå¯ä»¥å¿«é€Ÿå¾—å‡ºhashå€¼
> 4. hashç®—æ³•çš„<font color=red>å†²çªæ¦‚ç‡</font>è¾ƒå°
>
> ç”±äºHashåŸç†å°±æ˜¯å°†è¾“å…¥ç©ºé—´çš„å€¼æ˜ å°„æˆhashç©ºé—´å†…ï¼Œè€Œhashçš„å€¼ç©ºé—´è¿œè¿œå°äºè¾“å…¥çš„ç©ºé—´ã€‚
>
> æ ¹æ®æŠ½å±‰åŸç†ï¼Œä¸€å®šä¼šå­˜åœ¨ä¸åŒçš„è¾“å…¥è¢«æ˜ å°„æˆç›¸åŒçš„è¾“å‡ºçš„æƒ…å†µã€‚
>
> æŠ½å±‰åŸç†ï¼š
>
> â€‹	> æ¡Œå­ä¸Šæœ‰10ä¸ªè‹¹æœï¼Œ è¦æŠŠè¿™10ä¸ªè‹¹æœæ”¾åˆ°9ä¸ªæŠ½å±‰é‡Œï¼Œæ— è®ºæ€ä¹ˆæ”¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡³å°‘æœ‰ä¸€ä¸ªæŠ½å±‰ä¼šæ”¾ä¸å°‘äº2ä¸ªè‹¹æœ

#### ç‰¹æ€§

1. å®ç°äº†Setæ¥å£

2. HashSetåº•å±‚æ˜¯HashMapï¼ˆjdk1.7æ˜¯ æ•°ç»„+é“¾è¡¨ jdk1.8æ˜¯æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼‰
   
   ![](http://image.tinx.top/20211115152936.png)
   
   1. ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œtableæ•°ç»„æ‰©å®¹åˆ°16ï¼Œä¸´ç•Œå€¼(threshold)æ˜¯ 16 * åŠ è½½å› å­(loadFactor)æ˜¯ 0.75 = 12
   
      ![](http://image.tinx.top/20211115154114.png)
   
   2. å¦‚æœ table æ•°ç»„ä½¿ç”¨åˆ°äº†ä¸´ç•Œå€¼12ï¼Œå°±ä¼šæ‰©å®¹åˆ° 16 * 2 =32ï¼Œæ–°çš„ä¸´ç•Œå€¼å°±æ˜¯ 32 * 0.75 = 24ï¼Œä»¥æ­¤ç±»æ¨
   
   3. åœ¨Java8ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œå¹¶ä¸”tableçš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘)

![](http://image.tinx.top/20210709102855.png)

3. å¯ä»¥å­˜æ”¾nullå€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªNull
4. HashSetä¸ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œå–å†³äºhashåï¼Œå†ç¡®å®šç´¢å¼•çš„ç»“æœã€‚(å³ï¼Œä¸ä¿è¯å­˜æ”¾å…ƒç´ çš„é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´ï¼Œå¦‚æœè¦æœ‰é¡ºåºçš„å¯ä»¥è€ƒè™‘å®ç°äº†SortedSetæ¥å£çš„TreeSet)
5. ä¸èƒ½æœ‰é‡å¤å…ƒç´ (æ ¹æ®hashCodeå’Œequalsæ–¹æ³•æ¥åˆ¤æ–­çš„)



#### Add

##### æ­¥éª¤

1. HashSetåº•å±‚æ˜¯HashMap
2. æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå…ˆå¾—åˆ°hashå€¼ï¼Œä¼šè½¬æ¢æˆ -> ç´¢å¼•å€¼
3. æ‰¾åˆ°å­˜å‚¨æ•°æ®è¡¨tableï¼Œçœ‹è¿™ä¸ªç´¢å¼•ä½ç½®æ˜¯å¦å·²ç»å­˜æ”¾æœ‰å…ƒç´ 
4. å¦‚æœæ²¡æœ‰ï¼Œç›´æ¥åŠ å…¥
5. å¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨equalsæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œå°±æ”¾å¼ƒæ·»åŠ ï¼Œå¦‚æœä¸ç›¸åŒï¼Œåˆ™æ·»åŠ åˆ°æœ€å
6. åœ¨Java8ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œå¹¶ä¸”tableçš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘)



#### LinkedHashSet

+ æ˜¯HashSetçš„å­ç±»

  ![](http://image.tinx.top/20211115160118.png)

+ LinkedHashSet åº•å±‚æ˜¯ ä¸€ä¸ª LinkedHashMap

  ![](http://image.tinx.top/20211115160050.png)

  ![](http://image.tinx.top/20211115160230.png)

+ LinkedHashSet æ ¹æ®å…ƒç´  HashCodeæ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ŒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œè¿™ä½¿å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥çš„é¡ºåºçš„ä¿å­˜çš„

+ LinkedHashSetä¸å…è®¸æ’å…¥é‡å¤å…ƒç´ 

### TreeSet

> è‡ªåŠ¨æ’åºçš„Setä¸å¯é‡å¤é›†åˆï¼Œåº•å±‚æ˜¯TreeMap

æˆ‘ä»¬åœ¨åˆ›å»ºæ—¶å¯ä»¥å‘æ„é€ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªæ¯”è¾ƒå™¨ new Compartor() .... ç”¨æ¥æ¯”è¾ƒé›†åˆä¸­çš„å…ƒç´ ï¼Œè¾¾åˆ°æ’åºçš„ä½œç”¨

### CopyOnWriteArraySet

> æœ¬ç±»æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ²¡æœ‰é‡å¤å…ƒç´ çš„Setï¼Œä»–è·Ÿä¸Šé¢çš„Setä¸åŒï¼Œæ­¤ç±»ä¸ä¾èµ–ä¸Šé¢çš„Mapç»“æ„ï¼Œè€Œæ˜¯ç›´æ¥ä¾èµ–äº† CopyOnWriteArrayListï¼Œä»–çš„é—´æ¥æ•°æ®ç»“æ„å°±æ˜¯ä¸ªæ•°ç»„ï¼ï¼ˆé¢è¯•å¯èƒ½ä¼šé—®ï¼‰

![](http://image.tinx.top/20211116150350.png)

#### æ·»åŠ æ–¹æ³•

```java
// æºç ï¼š ç›´æ¥è°ƒç”¨ CopyOnWriteArrayListçš„addIfAbsent(E e)æ–¹æ³•
public boolean add(E e) {
    return al.addIfAbsent(e);
}

// è¿™ä¸€æ­¥æŸ¥çœ‹çš„æ˜¯æ˜¯å¦å·²ç»å­˜åœ¨è¿™ä¸ªå…ƒç´ äº†
public boolean addIfAbsent(E e) {
    Object[] snapshot = getArray();
    return indexOf(e, snapshot, 0, snapshot.length) >= 0 ? false :
        addIfAbsent(e, snapshot);
}

// æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨äº† ä¾èµ–çš„ CopyOnWriteArrayListä¸­çš„ addIfAbsent
private boolean addIfAbsent(E e, Object[] snapshot) {
  	// åŠ é”
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] current = getArray();
        int len = current.length;
        if (snapshot != current) {
            // Optimize for lost race to another addXXX operation
            int common = Math.min(snapshot.length, len);
            for (int i = 0; i < common; i++)
                if (current[i] != snapshot[i] && eq(e, current[i]))
                    return false;
            if (indexOf(e, current, common, len) >= 0)
                    return false;
        }
        Object[] newElements = Arrays.copyOf(current, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}
```



## Map

![](http://image.tinx.top/20211115133830.png)

1. Mapç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼š Key - Value

2. Mapä¸­çš„keyå’Œ valueå¯ä»¥ä½¿ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä¼šå°è£…åˆ°HashMap$Nodeå¯¹è±¡ä¸­(å®ç°äº†Map.Entryæ¥å£)

   ![](http://image.tinx.top/20211115161114.png)

3. Mapä¸­çš„keyä¸å…è®¸é‡å¤ï¼ŒåŸå› å’Œ<font color=red>HashSetä¸€æ ·(key hashåçš„ç»“æœ)</font>ï¼Œå¦‚æœé‡å¤å°±ä¼šè¦†ç›–åŸå€¼

4. Mapä¸­çš„valueå¯ä»¥é‡å¤

5. Mapçš„keyå¯ä»¥ä¸ºnullï¼Œvalueå¯ä»¥ä¸ºNullï¼Œæ³¨æ„keyå’Œnullåªèƒ½æœ‰ä¸€ä¸ªï¼Œvalueä¸ºNullå¯ä»¥æœ‰å¤šä¸ª

6. å¸¸ç”¨Stringç±»ä½œä¸ºMapçš„key

7. keyå’Œvalueä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„keyæ€»èƒ½æ‰¾åˆ°å¯¹åº”çš„valueã€‚



### HashMap

#### æ‰©å®¹æœºåˆ¶(å’ŒHashSetç›¸åŒ)

1. HashMapåº•å±‚ç»´æŠ¤äº†Nodeç±»å‹çš„æ•°ç»„tableï¼Œé»˜è®¤ä¸ºNull

   ![](http://image.tinx.top/20211115161821.png)

2. å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°†åŠ è½½å› å­(loadfactor)åˆå§‹åŒ–ä¸º0.75

   ![](http://image.tinx.top/20211115161958.png)

3. å½“æ·»åŠ  key-valæ—¶ï¼Œé€šè¿‡keyçš„å“ˆå¸Œå€¼å¾—åˆ°åœ¨tableçš„ç´¢å¼•
   1. ç„¶ååˆ¤æ–­è¿™ä¸ªç´¢å¼•å¤„å‡ºå¦æœ‰å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ å°±ç›´æ¥æ·»åŠ ã€‚
   2. å¦‚æœè¯¥ç´¢å¼•å¤„æœ‰å…ƒç´ æ²¡ç»§ç»­åˆ¤æ–­è¯¥å…ƒç´ çš„keyå’Œå‡†å¤‡åŠ å…¥çš„keyæ˜¯å¦ç›¸ç­‰
      1. å¦‚æœç›¸ç­‰ï¼Œåˆ™ç›´æ¥æ›¿æ¢val
      2. å¦‚æœä¸ç›¸ç­‰éœ€è¦åˆ¤æ–­æ ‘ç»“æ„è¿˜æ˜¯é“¾è¡¨ç»“æ„ï¼Œåšå‡ºç›¸åº”çš„å¤„ç†ã€‚å¦‚æœæ·»åŠ æ—¶å‘ç°å®¹é‡ä¸å¤Ÿï¼Œåˆ™éœ€è¦æ‰©å®¹ã€‚

4. ç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œåˆ™éœ€è¦æ‰©å®¹çš„tableåˆå§‹å®¹é‡ä¸º16ï¼Œä¸´ç•Œå€¼ä¸º (16(åˆå§‹å®¹é‡) *0.75(å¢é•¿å› å­) = 12)

5. ä»¥åå†æ‰©å®¹ï¼Œå°±éœ€è¦æ‰©å®¹tableå®¹é‡ä¸ºåŸæ¥çš„2å€ï¼Œä¸´ç•Œå€¼ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œä»¥æ­¤ç±»æ¨

6. åœ¨Java8ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ >=TREEIFY_THRESHOLDï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œå¹¶ä¸”tableçš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œè½¬æ¢çº¢é»‘æ ‘çš„æ“ä½œ

   ![](http://image.tinx.top/20211115162615.png)

â€‹		![](http://image.tinx.top/20211115162733.png)

â€‹		ç„¶åå¦‚æœæ˜¯è°ƒç”¨äº†resizeï¼Œä¼šåœ¨ä»£ç ä¸­ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯ä»¥ä»æ ‘åŒ–è½¬åŒ–ä¸ºæ•°ç»„åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š		![](http://image.tinx.top/20211115163152.png)

![](http://image.tinx.top/20211115163013.png)		

#### Putæµç¨‹

![](https://img-blog.csdnimg.cn/20210315155420212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NodW1veWlu,size_16,color_FFFFFF,t_70#pic_center)



##### Putæºç 

> (1) é¦–å…ˆè·å–putå€¼çš„keyçš„hashCodeï¼Œç„¶åè°ƒç”¨putValå‡½æ•°ï¼Œå‘å…¶ä¸­æ·»åŠ å€¼
> (2) åœ¨putValå‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯åˆšåˆå§‹åŒ–çš„HashMapï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿›è¡Œæ‰©å®¹æ“ä½œ 
> (3) ç„¶ååˆ¤æ–­hashMapçš„æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªè¦æ’å…¥çš„å€¼çš„é“¾è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨ä¸ºNullï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„ç»“ç‚¹(è°ƒç”¨newNodeå‡½æ•°)
> (4) å¦‚æœæ˜¯å­˜åœ¨çš„æƒ…å†µï¼Œå°±åˆ¤æ–­å½“å‰é“¾è¡¨å…ƒç´ æ˜¯å¦å’Œä¼ å…¥çš„keyç›¸åŒï¼Œå¦‚æœç›¸åŒå°±ï¼Œç­‰å¾…åç»­å¤„ç†ï¼Œå°†pèµ‹å€¼ç»™e(è¯¦æƒ…çœ‹ä¸Šé¢æºç )
> (5) å¦‚æœä¸ç›¸åŒï¼Œå°±åˆ¤æ–­è¿™ä¸ªé“¾è¡¨æ˜¯å¦æ˜¯æ ‘å½¢ç»“æ„ï¼Œæ˜¯çš„è¯ï¼Œå°±è°ƒç”¨putTreeValå‡½æ•°ï¼Œåˆ›å»ºæ ‘çš„æ–°èŠ‚ç‚¹
> (6) å¦åˆ™ï¼Œå°±éå†è¿™ä¸ªæ•°ç»„å…ƒç´ æŒ‡å‘çš„è¿™ä¸€æ¡é“¾è¡¨ï¼Œéå†æ–¹æ³•çš„å†…å®¹å°±æ˜¯ï¼Œå¦‚æœè¿™æ˜¯é“¾è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ (é“¾è¡¨.next == nullçš„æƒ…å†µ)å°±ä¼šå¯¹è¿™ä¸ªé“¾è¡¨æ·»åŠ æ–°çš„ç»“ç‚¹(è°ƒç”¨newNodeæ–¹æ³•)ï¼Œç„¶åå†åˆ¤æ–­è¿™ä¸ªé“¾è¡¨æ•°é‡æ˜¯å¦å¤§äºé˜ˆå€¼ç­‰äº(TREEIFY_THRESHOLD = 8) - 1 = 7ï¼Œå¦‚æœæ˜¯å°±ä¼šå†æ¬¡åˆ¤æ–­æŸ¥çœ‹è¿™ä¸ªhashMapçš„æ•°ç»„æ˜¯å¦å¤§äº64ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶ï¼Œå°±è¿›è¡Œçº¢é»‘æ ‘åŒ–ï¼Œç„¶åå¦‚æœéå†çš„è¿™ä¸ªé“¾è¡¨å’Œè¦åŠ å…¥çš„å€¼ç›¸åŒï¼Œå°±ç»ˆæ­¢å¾ªç¯ï¼Œè¯´æ˜é‡å¤å€¼ï¼Œä¸å…è®¸åŠ å…¥ã€‚
> (7) å¦‚æœæ—§å€¼ä¸ºnullï¼Œå¹¶ä¸”å”¯ä¸€æ€§æ ‡å¿—ç¬¦(onlyIfAbsent)ä¸ºtrueï¼Œå°±è¿›è¡Œå€¼è¦†ç›–çš„æ“ä½œ
> (8) ç„¶åæœ€ç»ˆåœ¨æ£€æŸ¥ä¸€ä¸‹å®¹é‡æ˜¯å¦å¤§äºé˜ˆå€¼ï¼Œæ˜¯çš„è¯è¦è¿›è¡Œæ‰©å®¹ï¼Œç„¶åè°ƒç”¨ä¸€ä¸‹Mapæ¥å£ç•™ä¸‹çš„é’©å­æ‰©å……å‡½æ•°afterNodeInsertionï¼Œè¿”å›null
> è¡¥å……ï¼š ä¸ºä»€ä¹ˆè¿”å›Nullï¼Œå› ä¸ºåœ¨HashSet(åº•å±‚æ˜¯HashMap)è°ƒç”¨è¿™ä¸ªputValå‡½æ•°çš„æ—¶å€™ï¼Œä¼šæœ€ç»ˆåˆ¤æ–­æ˜¯å¦æ·»åŠ æˆåŠŸçš„æ ‡å¿—å°±æ˜¯ä½¿ç”¨äº†ä¸‰ç›®è¿ç®—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦ == nullã€‚
> // HashSetçš„addå‡½æ•°
> public boolean add(E e) {
>         return map.put(e, PRESENT)==null;
>  }

```java
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}

// hash å‡½æ•°
static final int hash(Object key) {
    int h;
  	// è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ hashCodeæ–¹æ³•ï¼Œæ‹¿åˆ°è¿™ä¸ªç±»çš„hashCode ç„¶åå°†è¿™ä¸ª hashCode ä½è¿ç®—å³ç§» 16ä½(é˜²æ­¢Hashç¢°æ’)
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

```java
// å…³é”®çš„è®¾ç½®å€¼æ­¥éª¤ï¼Œé€‚ç”¨äºhashSet hashMapç­‰
final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) {
  // tab: å¤åˆ¶çš„tableæ•°ç»„å€¼
  // p: æ‹¿åˆ°å­˜å‚¨è¿™ä¸ªkeyçš„å†…å®¹
  // n: hashMap æ•°ç»„çš„é•¿åº¦
  // i: æŒ‡å‘å¤åˆ¶çš„
    Node<K,V>[] tab; Node<K,V> p; int n, i;
  
  // è¿™ä¸ªtableæŒ‡çš„æ˜¯ hashMapä¸­å­˜å‚¨æ•°æ®çš„Node<K,V>[]æ•°ç»„
  // å¦‚æœæ˜¯è¿™ä¸ªåˆšè¢«åˆå§‹åŒ–å‡ºæ¥ï¼Œå°±ä¼šè¿›è¡Œè¿›è¡Œresizeæ–¹æ³•
  // final Node<K,V>[] resize() {
  //    Node<K,V>[] oldTab = table;
  //    int oldCap = (oldTab == null) ? 0 : oldTab.length; }
    if ((tab = table) == null || (n = tab.length) == 0)
        n = (tab = resize()).length;
  
  // å¦‚æœé€šè¿‡é•¿åº¦ - 1 å’Œ hash ä¸ä½è¿ç®— å¾—åˆ°çš„å€¼ä¸º nullï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ª æ–°çš„Nodeå€¼,ä»–çš„nextä¸º nullï¼Œä½œä¸ºé“¾è¡¨çš„ç¬¬ä¸€ä¸ª
    if ((p = tab[i = (n - 1) & hash]) == null)
        tab[i] = newNode(hash, key, value, null);
    else {
        Node<K,V> e; K k;
      // å¦‚æœé•¿åº¦ -1 å’Œ hashè¿›è¡Œä¸ä½è¿ç®—å¾—åˆ°çš„å€¼ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰çš„å€¼å’Œä¼ å…¥è¦æ·»åŠ çš„å€¼hashåç›¸åŒ
        if (p.hash == hash && ((k = p.key) == key || (key != null && key.equals(k))))
          // å°†è¿™ä¸ª å°†å½“å‰çš„å€¼èµ‹å€¼ç»™ e
            e = p;
      // å¦‚æœæ˜¯çº¢é»‘æ ‘ æ ‘å½¢ç»“æ„ï¼Œä¼šå°†è¿™ä¸ªå€¼æ·»åŠ ,ç„¶åå°†è¿”å›çš„æ ‘å½¢ç»“æ„èµ‹å€¼ç»™ e
        else if (p instanceof TreeNode)
            e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);
        else {
          	// éå†è¿™ä¸ªæ¡¶é“¾è¡¨
            for (int binCount = 0; ; ++binCount) {
              	// å¦‚æœå½“å‰é“¾è¡¨éå†çš„ä¸‹ä¸€ä¸ªå¯¹è±¡æ˜¯ null
                if ((e = p.next) == null) {
                  // å°†è¿™ä¸ªå€¼æ”¾å…¥æ¡¶é“¾è¡¨å½“å‰å€¼çš„ä¸‹ä¸€ä¸ª é“¾è¡¨nodeä¸­
                    p.next = newNode(hash, key, value, null);
                  	// å¦‚æœ æ¡¶é“¾è¡¨æ•°é‡ å¤§äºç­‰äº æ ‘åŒ–é˜ˆå€¼(8) - 1 = 7
                    if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
                      // åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¼šåˆ¤æ–­å½“å‰æ•°ç»„æ•°é‡æ˜¯å¦å¤§äºç­‰äº64 å¦‚æœå¤§äºç­‰äºçš„è¯ä¼šè¿›è¡Œçº¢é»‘æ ‘åŒ–è¿™ä¸ªé“¾è¡¨
                        treeifyBin(tab, hash);
                  // ç»ˆæ­¢å¾ªç¯
                    break;
                }
              	// å¦‚æœéå†çš„è¿™ä¸ªé“¾è¡¨å’Œè¦åŠ å…¥çš„å€¼ç›¸åŒï¼Œå°±ç»ˆæ­¢å¾ªç¯ï¼Œè¯´æ˜é‡å¤å€¼ï¼Œä¸å…è®¸åŠ å…¥
                if (e.hash == hash && ((k = e.key) == key || (key != null && key.equals(k))))
                    break;
              	// å¦åˆ™å°±å°†è¿™ä¸ªå€¼æ”¾å…¥è¿™ä¸ªé“¾è¡¨ä¸­
                p = e;
            }
        }
        if (e != null) { // existing mapping for key
            V oldValue = e.value;
            if (!onlyIfAbsent || oldValue == null)
                e.value = value;
            afterNodeAccess(e);
            return oldValue;
        }
    }
  	// ä¿®æ”¹æ¬¡æ•° + 1
    ++modCount;
  	// å¦‚æœä¸‹æ¬¡æ·»åŠ çš„é•¿åº¦ å¤§äº é˜ˆå€¼ï¼Œå°±ä¼šè¿›è¡Œ æ‰©å……
    if (++size > threshold)
        resize();
  	// Mapæ¥å£è°ƒç”¨çš„æ–¹æ³•ï¼Œç”¨äºå®ç°ç±»çš„åç»­å¤„ç†
    afterNodeInsertion(evict);
  	// å¦‚æœè¿”å›çš„æ˜¯ nullï¼Œåé¢ä¼šåˆ¤æ–­æ˜¯å¦æ·»åŠ çš„å…ƒç´ æ˜¯å¦ == nullï¼Œå¦‚æœæ˜¯è¿”å›trueï¼Œå¦‚æœä¸æ˜¯(ä¸Šé¢æœ‰return),å°±ä¼šè¿”å›falseè¡¨ç¤ºæ·»åŠ å¤±è´¥
    return null;
}
```

##### hashcodeæ–¹æ³•ä¸­ä¸ºä»€ä¹ˆè¦æœ€é«˜ä½è¦å³ç§»16ä½å‘¢ï¼Ÿ

```java
// hash å‡½æ•°
static final int hash(Object key) {
    int h;
  	// è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ hashCodeæ–¹æ³•ï¼Œæ‹¿åˆ°è¿™ä¸ªç±»çš„hashCode ç„¶åå°†è¿™ä¸ª hashCode ä½è¿ç®—å³ç§» 16ä½(é˜²æ­¢Hashç¢°æ’)
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

> ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾HashMapå®¹é‡ä¸º16(äºŒè¿›åˆ¶ä¸º10000ï¼Œn-1=1111)ï¼ŒhashCodeè¶³å¤Ÿå¤§
>
> A:00101010010001001011010100101011
>
> B:00101010010001101011010100101011
>
> HashMapçš„æ•£åˆ—ç®—æ³•ä¸º(n-1)&hashï¼Œå½“n=16æ—¶ï¼Œn-1åªæœ‰åå››ä½å€¼ä¸º1ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£å‚åŠ è¿ç®—çš„åªæœ‰å››ä½(n-1)&A = 1011,(n-1)&B=1011ï¼Œæ˜æ˜¾ä¸å¤Ÿåˆ†æ•£ã€‚
>
> (h = key.hashCode()) ^ (h >>> 16)ä½œç”¨å°±æ˜¯å°½é‡è®©æ‰€æœ‰ä½å‚ä¸è¿ç®—ï¼Œå·²çŸ¥intå¤§å°ä¸º32ä½ï¼Œ(h = key.hashCode()) ^ (h >>> 16)å¯ä»¥è®©hashCodeå†…éƒ¨æ‰€æœ‰ä½å…ˆå‚ä¸ä¸€éäº¦æˆ–è¿ç®—(é«˜16ä½å’Œä½16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œå¯ä»¥æ›´å¥½çš„ä¿ç•™æ¯ä¸€ä½çš„ç‰¹å¾ï¼Œçœ‹ä¸‹åˆ—è¡¥å……)
>
> Aæ“ä½œä¹‹åä¸ºï¼š00101010010001001001111101101111
>
> Bæ“ä½œä¹‹åä¸ºï¼š00101010010001101011111101101101
>
> ç°åœ¨å‚ä¸è¿ç®—ä¸è¿ç®—çš„åå››ä½å°±æœ‰åŒºåˆ«äº†ï¼Œå°±èƒ½æ•£åˆ—åˆ°ä¸åŒçš„æ¡¶ä¸­äº†ã€‚
>
> è¡¥å……ï¼š
>
> äº¦æˆ–è¿ç®—(^)ï¼šä¸åŒä¸º1ï¼Œç›¸åŒä¸º0  å¼‚æˆ–è¿ç®—èƒ½æ›´å¥½çš„ä¿ç•™å„éƒ¨åˆ†çš„ç‰¹å¾(å˜åŒ–çš„åœ°æ–¹01éƒ½æœ‰)
>
> ä¸è¿ç®—(&)ï¼š  æœ‰0åˆ™0ï¼Œå…¨1åˆ™1  ç»“æœåå‘äº0 (å˜åŒ–çš„åœ°æ–¹éƒ½å˜0äº†)
>
> æˆ–è¿ç®—(|)ï¼š  æœ‰1åˆ™1ï¼Œå…¨0åˆ™0  ç»“æœåå‘äº1ï¼ˆå˜åŒ–çš„åœ°æ–¹éƒ½å˜1äº†ï¼‰

##### ä¸ºå•¥è¦è¿›è¡Œ(n-1)&hashcodeï¼Ÿ

è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹hashMapæ˜¯æ€ä¹ˆå­˜æ”¾å…ƒç´ çš„

```java
if ((tab = table) == null || (n = tab.length) == 0)
   n = (tab = resize()).length;
if ((p = tab[i = (n - 1) & hash]) == null)
   tab[i] = newNode(hash, key, value, null);
```

åœ¨è¿™è¾¹jdk1.7å’Œ1.8æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä½¿ç”¨ n(tableçš„å®¹é‡ä¸hashcodeè¿›è¡Œ(&)ä¸è¿ç®—(ä½è¿ç®—ç¬¦ï¼Œä¸è¿ç®—ï¼š  æœ‰0åˆ™0ï¼Œå…¨1åˆ™1  ç»“æœåå‘äº0 (å˜åŒ–çš„åœ°æ–¹éƒ½å˜0äº†)))

æŠ›å¼€ä¸Šé¢æåˆ°çš„å³ç§»16ä½é—®é¢˜ï¼Œä½ æƒ³æƒ³ï¼Œä¸€ä¸ªå¯¹è±¡å–å®Œhashå€¼äº†ï¼Œå®ƒå¾—å¾€entryæ•°ç»„é‡Œæ”¾å§ï¼Œä½†æ˜¯æ•°ç»„é•¿åº¦åˆæ˜¯æœ‰é™çš„ï¼Œä¸å¯èƒ½ä¸€ä¸ªèåœä¸€ä¸ªå‘ã€‚

ä»¥é»˜è®¤åˆå§‹é•¿åº¦ä¸º16ä¸ºä¾‹

æƒ³æŠŠä¸€ä¸ªç¼–å·å¤§äº16çš„æ•°ï¼Œåœ¨16ä¸ªæ ¼å­é‡Œæ‰¾ä¸ªä½ç½®æ”¾ä¸‹ï¼Œè¦æ˜¯ä½ è‡ªå·±è®¾è®¡ä¼šå’‹åšå‘¢(ä¸èƒ½ä¹±æ”¾)

ç»å¤§å¤šæ•°äººéƒ½ä¼šé€‰æ‹©å–ä½™æ³•ï¼Œå°±æ˜¯ï¼šç¼–å·%æ ¼å­æ•°

å°ç™½ä¸¾ä¾‹ï¼š 17%16 = 1  æ”¾åœ¨ç¬¬ä¸€ä¸ªæ ¼å­ã€‚

å–ä½™æ“ä½œæ¶‰åŠåˆ°åº•å±‚æ±‡ç¼–å’Œè¿ç®—å™¨ç”µè·¯è®¾è®¡ï¼Œè™½ç„¶æˆ‘æœ¬ç§‘æ˜¯ç”µå­ä¿¡æ¯çš„ï¼Œä½†æ—©å°±æŠŠçŸ¥è¯†è¿˜ç»™è€å¸ˆäº†ã€‚

å¤§å®¶åªè¦çŸ¥é“ä¸€ä¸ªç»“è®ºï¼Œå°±æ˜¯å–ä½™è¿ç®—æ²¡ä½è¿ç®—å¿«å°±è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨äº† ä¸ä½è¿ç®—

##### æ€ä¹ˆè§£å†³hashå†²çªçš„å‘¢ï¼Ÿ

> è§£å†³hashå†²çªçš„åŠæ³•
>
> 1. å¼€æ”¾å®šå€æ³•ï¼ˆçº¿æ€§æ¢æµ‹å†æ•£åˆ—ï¼ŒäºŒæ¬¡æ¢æµ‹å†æ•£åˆ—ï¼Œä¼ªéšæœºæ¢æµ‹å†æ•£åˆ—ï¼‰
>
>    > æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœå‡ºç°æ•£åˆ—å†²çªï¼Œæˆ‘ä»¬å°±**é‡æ–°æ¢æµ‹**ä¸€ä¸ªç©ºé—²ä½ç½®ï¼Œå†å°†å…ƒç´ æ’å…¥ã€‚
>
> 2. å†å“ˆå¸Œæ³•
>
> 3. **é“¾åœ°å€æ³•**
>
> 4. å»ºç«‹ä¸€ä¸ªå…¬å…±æº¢å‡ºåŒº
>
> Javaé‡‡ç”¨çš„æ˜¯ é“¾åœ°å€æ³• ï¼Œé“¾åœ°å€æ³•å°±æ˜¯å°†ç›¸åŒhashå€¼çš„å¯¹è±¡ç»„ç»‡æˆä¸€ä¸ªé“¾è¡¨æ”¾åœ¨hashå€¼å¯¹åº”çš„æ§½ä½ï¼Œ
>
> åœ¨**æ’å…¥**çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºå¯¹åº”çš„æ•£åˆ—æ§½ä½ï¼Œå°†å…ƒç´ æ’å…¥åˆ°å¯¹åº”çš„é“¾è¡¨å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º**Oï¼ˆ1ï¼‰**ï¼›åœ¨**æŸ¥æ‰¾æˆ–åˆ é™¤**å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬åŒæ ·é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºå¯¹åº”çš„æ•£åˆ—æ§½ä½ï¼Œç„¶åå†é€šè¿‡éå†é“¾è¡¨è¿›è¡ŒæŸ¥æ‰¾æˆ–åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º**Oï¼ˆkï¼‰**ï¼Œkä¸ºé“¾è¡¨é•¿åº¦ã€‚

##### jdk1.7å’Œjdk1.8åœ¨é“¾è¡¨æ’å…¥å…ƒç´ æœ‰ä»€ä¹ˆåŒºåˆ«å˜›ï¼Ÿ

jdk1.7: å¤´æ’æ³•ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°æ— é™å¾ªç¯é—®é¢˜

jdk.18:å°¾æ’æ³•

å¤´æ’æ³•å¯èƒ½ä¼šå‡ºç°æ­»å¾ªç¯é—®é¢˜è¯¦è§£ï¼š

```java
void transfer(Entry[] newTable, boolean rehash) {
        int newCapacity = newTable.length;
        for (Entry<K,V> e : table) {
            while(null != e) {
            	//1ï¼Œ è·å–æ—§è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
                Entry<K,V> next = e.next;
                if (rehash) {
                    e.hash = null == e.key ? 0 : hash(e.key);
                }
                int i = indexFor(e.hash, newCapacity);
                e.next = newTable[i];
                newTable[i] = e;
                e = next;
            }
        }
    }
```

1.  å‡è®¾æ—§è¡¨çš„åˆå§‹é•¿åº¦ä¸º2ï¼Œæ­¤æ—¶å·²ç»åœ¨ä¸‹æ ‡ä¸º1çš„ä½ç½®å­˜æ”¾äº†ä¸¤ä¸ªå…ƒç´ ï¼Œå†putç¬¬ä¸‰ä¸ªå…ƒç´ çš„æ—¶å€™è€ƒè™‘éœ€è¦æ‰©å®¹ï¼›

   ![](http://image.tinx.top/20211116100103.png)

2. æ­¤åˆ»æœ‰ä¸¤ä¸ªçº¿ç¨‹A,Béƒ½è¿›è¡Œputæ“ä½œï¼Œçº¿ç¨‹Aå…ˆæ‰©å®¹ï¼Œæ‰§è¡Œåˆ°ä»£ç Entry<K,V> next = e.next;æ‰§è¡Œå®Œè¿™æ®µä»£ç ï¼Œçº¿ç¨‹AæŒ‚èµ·ï¼›
   ç„¶åçº¿ç¨‹Bå¼€å§‹æ‰§è¡Œtransferå‡½æ•°ä¸­çš„whileå¾ªç¯ï¼Œä¼šæŠŠåŸæ¥çš„tableå˜æˆä¸€ä¸ªtableï¼ˆçº¿ç¨‹Bè‡ªå·±çš„æ ˆä¸­ï¼‰ï¼Œå†å†™å…¥åˆ°å†…å­˜ä¸­ã€‚

   æ³¨æ„ï¼Œå› ä¸ºçº¿ç¨‹Açš„eæŒ‡å‘äº†key(3), nextæŒ‡å‘äº†key(7), å…¶åœ¨çº¿ç¨‹B rehashåï¼ŒæŒ‡å‘äº†çº¿ç¨‹Bé‡ç»„åçš„é“¾è¡¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é“¾è¡¨çš„é¡ºåºè¢«åè½¬äº†ã€‚

   ![](http://image.tinx.top/20211116100125.png)

3. çº¿ç¨‹Aè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œï¼š

   å…ˆæ˜¯æ‰§è¡ŒnewTable[i] = e ;
   ç„¶åæ˜¯e = next , å¯¼è‡´äº†eæŒ‡å‘äº†key(7);
   è€Œä¸‹ä¸€æ¬¡å¾ªç¯çš„next = e.next å¯¼è‡´nextæŒ‡å‘äº†key(3)
   å¦‚ä¸‹å›¾ï¼š

   ![](http://image.tinx.top/20211116100151.png)

4.  å½“å‰å¾ªç¯ï¼š
   e.next = newTable[i];
   newTable[i] = e ;
   e = next;
   å°†key(7)æ‘˜ä¸‹æ¥é‡‡ç”¨å¤´æ’æ³•ï¼Œæ”¾åˆ°newTable[i]çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸­ï¼Œä¸‹ä¸€ä¸ªç»“ç‚¹æŒ‡å‘key(3)
   ä¸‹ä¸€æ¬¡å¾ªç¯ï¼š
   next = e.next; æ­¤æ—¶eä¸ºkey(3)
   æ­¤æ—¶next = null; ä¸ä¼šåœ¨å¾€ä¸‹å¾ªç¯äº†ã€‚

   ![](http://image.tinx.top/20211116100213.png)

5. æ­¤æ—¶key(3)é‡‡ç”¨å¤´æ’æ³•åˆæ”¾åˆ°newTable[i]çš„ä½ç½®ï¼Œå¯¼è‡´key(3)æŒ‡å‘key(7)ï¼Œæ³¨æ„æ­¤æ—¶key(7).nextå·²ç»æŒ‡å‘äº†key(3)ï¼Œæ‰€ä»¥ç¯å½¢é“¾è¡¨å°±å‡ºç°äº†ã€‚å¦‚ä¸‹å›¾ï¼šäºæ˜¯å½“æˆ‘ä»¬çš„çº¿ç¨‹Aè°ƒç”¨get()æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸‹æ ‡æ˜ å°„åˆ°3å¤„ï¼Œåˆ™ä¼šå‡ºç°æ­»å¾ªç¯ã€‚

   ![](http://image.tinx.top/20211116100246.png)æ€»ç»“ï¼š
   çº¿ç¨‹Aå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®ŒEntry<K,V> next = e.next;è¿™è¡Œä»£ç åæŒ‚èµ·ï¼Œç„¶åçº¿ç¨‹Bå®Œæ•´çš„æ‰§è¡Œå®Œæ•´ä¸ªæ‰©å®¹æµç¨‹ï¼Œæ¥ç€çº¿ç¨‹Aå”¤é†’ï¼Œç»§ç»­ä¹‹å‰çš„å¾€ä¸‹æ‰§è¡Œï¼Œå½“whileå¾ªç¯æ‰§è¡Œ3æ¬¡åä¼šå½¢æˆç¯å½¢é“¾è¡¨ã€‚



#### Getæµç¨‹

##### æºç 

```java
// ä»£ç é¢ä¸Šæ„æ€çš„æ„æ€ (doge)
public V get(Object key) {
    Node<K,V> e;
    return (e = getNode(hash(key), key)) == null ? null : e.value;
}
```

```java
final Node<K,V> getNode(int hash, Object key) {
    Node<K,V>[] tab; Node<K,V> first, e; int n; K k;
  	// åˆ¤æ–­å½“å‰Mapå¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå¹¶ä¸”Mapä¸­æ•°ç»„çš„é•¿åº¦å¤§äº0ï¼Œå¹¶ä¸”æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¸ºnull
    if ((tab = table) != null && (n = tab.length) >0 && (first = tab[(n - 1) &hash]) != null) {
      // æŸ¥çœ‹ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¯è¦æŸ¥æ‰¾çš„å€¼ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±ç›´æ¥è¿”å›  
      if (first.hash == hash && ((k = first.key) == key || (key != null && key.equals(k))))
            return first;
      	// å¦‚æœ firsté“¾è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ä¸ä¸ºNull
        if ((e = first.next) != null) {
          	// å¦‚æœé¦–å…ƒç´ æ˜¯ çº¢é»‘æ ‘ç±»å‹
            if (first instanceof TreeNode)
              	// å°±ä»çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾è¿™ä¸ªå…ƒç´ 
                return ((TreeNode<K,V>)first).getTreeNode(hash, key);
          	// å¦åˆ™ä½¿ç”¨ do while éå†è¿™ä¸ªæ˜¯å¦å’Œä¼ å…¥çš„keyç›¸åŒï¼Œä¼šè¿”å›è¿™ä¸ªå¯¹è±¡
            do {
                if (e.hash == hash && ((k = e.key) == key || (key != null && key.equals(k))))
                    return e;
            } while ((e = e.next) != null);
        }
    }
    return null;
}
```

#### HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹

ä¸ºäº†èƒ½è®© HashMap å­˜å–é«˜æ•ˆï¼Œå°½é‡è¾ƒå°‘ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ã€‚æˆ‘ä»¬ä¸Šé¢ä¹Ÿè®²åˆ°äº†è¿‡äº†ï¼ŒHash å€¼çš„èŒƒå›´å€¼-2147483648åˆ°2147483647ï¼Œå‰ååŠ èµ·æ¥å¤§æ¦‚40äº¿çš„æ˜ å°„ç©ºé—´ï¼Œåªè¦å“ˆå¸Œå‡½æ•°æ˜ å°„å¾—æ¯”è¾ƒå‡åŒ€æ¾æ•£ï¼Œä¸€èˆ¬åº”ç”¨æ˜¯å¾ˆéš¾å‡ºç°ç¢°æ’çš„ã€‚ä½†é—®é¢˜æ˜¯ä¸€ä¸ª40äº¿é•¿åº¦çš„æ•°ç»„ï¼Œå†…å­˜æ˜¯æ”¾ä¸ä¸‹çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ•£åˆ—å€¼æ˜¯ä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨çš„ã€‚ç”¨ä¹‹å‰è¿˜è¦å…ˆåšå¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½ç”¨æ¥è¦å­˜æ”¾çš„ä½ç½®ä¹Ÿå°±æ˜¯å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ã€‚è¿™ä¸ªæ•°ç»„ä¸‹æ ‡çš„è®¡ç®—æ–¹æ³•æ˜¯â€œ `(n - 1) & hash`â€ã€‚ï¼ˆnä»£è¡¨æ•°ç»„é•¿åº¦ï¼‰ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚

è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿ

æˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡ç”¨%å–ä½™çš„æ“ä½œæ¥å®ç°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼šâ€œå–ä½™(%)æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯2çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºä¸å…¶é™¤æ•°å‡ä¸€çš„ä¸(&)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ hash%length==hash&(length-1)çš„å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ï¼›ï¼‰ã€‚â€ å¹¶ä¸” é‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œè¿™å°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚

### LinkedHashMap

> ç®—æ˜¯HashMapçš„å‡çº§ç‰ˆï¼Œå†…éƒ¨ä½¿ç”¨çš„ç±»Entryæ˜¯ç»§æ‰¿è‡ªHashMapçš„Nodeç±»ï¼Œå‘å…¶ä¸­æ·»åŠ äº†ä¸¤ä¸ªå­—æ®µ beforeã€after
>
> ![](http://image.tinx.top/20211118095051.png)
>
> LinkedHashMapç»´æŠ¤ç€ä¸€ä¸ªè¿è¡Œäºæ‰€æœ‰æ¡ç›®çš„åŒé‡é“¾æ¥åˆ—è¡¨ã€‚æ­¤é“¾æ¥åˆ—è¡¨å®šä¹‰äº†è¿­ä»£é¡ºåºï¼Œè¯¥è¿­ä»£é¡ºåºå¯ä»¥æ˜¯æ’å…¥é¡ºåºï¼ˆinsert-orderï¼‰æˆ–è€…æ˜¯è®¿é—®é¡ºåºï¼Œå…¶ä¸­é»˜è®¤çš„è¿­ä»£è®¿é—®é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºï¼Œå³å¯ä»¥æŒ‰æ’å…¥çš„é¡ºåºéå†å…ƒç´ 
>
> - LRUç®—æ³•å¯ä»¥ç”¨LinkedHashMapå®ç°ã€‚

#### JAVA8çš„ConcurrentHashMapä¸ºä»€ä¹ˆæ”¾å¼ƒäº†åˆ†æ®µé”ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Œå¦‚æœä½ æ¥è®¾è®¡ï¼Œä½ å¦‚ä½•è®¾è®¡ã€‚
jdk8 æ”¾å¼ƒäº†åˆ†æ®µé”è€Œæ˜¯ç”¨äº†Nodeé”ï¼Œå‡ä½é”çš„ç²’åº¦ï¼Œæé«˜æ€§èƒ½ï¼Œå¹¶ä½¿ç”¨CASæ“ä½œæ¥ç¡®ä¿Nodeçš„ä¸€äº›æ“ä½œçš„åŸå­æ€§ï¼Œå–ä»£äº†é”ã€‚

å¯ä»¥è·Ÿé¢è¯•å®˜èŠèŠæ‚²è§‚é”å’ŒCASä¹è§‚é”çš„åŒºåˆ«ï¼Œä¼˜ç¼ºç‚¹å“ˆ~

### TreeMap

> æœ‰åºçš„Mapé›†åˆ

æˆ‘ä»¬åœ¨åˆ›å»ºæ—¶å¯ä»¥å‘æ„é€ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªæ¯”è¾ƒå™¨ new Compartor() .... ç”¨æ¥æ¯”è¾ƒé›†åˆä¸­çš„å…ƒç´ ï¼Œè¾¾åˆ°æ’åºçš„ä½œç”¨



### HashTable

+ HashTableçš„é”®å’Œå€¼éƒ½ä¸èƒ½ä¸ºnullï¼Œå¦‚æœæœ‰Nullåˆ™ä¼šæŠ›å‡º NullPointerException
+ HashTableä½¿ç”¨æ–¹å¼å’ŒHashMapæ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºHashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„
+ åº•å±‚æ•°ç»„ HahTable$Entry[] åˆå§‹åŒ–å¤§å°ä¸º 11
+ ä¸´ç•Œå€¼ä¸º 11 * 0.75 = 8

#### æ‰©å®¹æœºåˆ¶

HahTableå½“é‡åˆ°å½“å‰æ·»åŠ çš„å€¼è¶…è¿‡ä¸´ç•Œå€¼æ—¶ 11*0.75 = 8æ—¶ï¼Œä¼šé€‰æ‹©å°†å†…éƒ¨çš„å®¹é‡ è¿›è¡Œç¿»å€ + 1



### ConcurrentHashMap

> åˆå§‹æ•°ç»„å®¹é‡ä¸º 16 å¢é•¿å› å­ä¸º0.75ï¼ˆè·ŸHashMapå‡ ä¹ç›¸åŒï¼‰ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ä»–è¿›è¡Œäº†åˆ†å—å­˜å‚¨```Segement```(æ­¤ç±»ç»§æ‰¿äº†ReentranLockï¼Œç›¸å½“äºåœ¨æ¯ä¸€æ®µéƒ½åŠ äº†é”ğŸ”)



## æ€»ç»“

![](http://image.tinx.top/20211116154925.png)
